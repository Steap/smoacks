# !/bin/bash
#
# app-env - sets up the application environment variables base on mode
#           where mode is one of 'development', 'test', 'production'
#
# Variables with values that are independent of mode
export APP_DB_NAME="{{ smoacks_app_name }}"
export APP_DB_CPORT={{ smoacks_db_port }}

if [ "$SMOACKS_MODE" == "development" ]; then
  echo "Setting up development environment variables"
  export APP_DB_CNAME='{{ smoacks_dev_db_service }}'
  export APP_DB_ACCOUNT='{{ smoacks_dev_db_account }}'
  export APP_DB_PASSWORD='{{ smoacks_dev_db_password }}'
elif [ "$SMOACKS_MODE" == "test" ]; then
  export APP_DB_CNAME='{{ smoacks_test_db_service }}'
  export APP_DB_ACCOUNT='{{ smoacks_test_db_account }}'
  export APP_DB_PASSWORD='{{ smoacks_test_db_password }}'
elif [ "$SMOACKS_MODE" == "production" ]; then
  export APP_DB_CNAME='{{ smoacks_db_service }}'
  export APP_DB_ACCOUNT='{{ smoacks_db_account }}'
  export APP_DB_PASSWORD='{{ smoacks_db_password }}'
else
  echo "Invalid value for SMOACKS_MODE: $SMOAKS_MODE"
fi
